<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Anisotropic news | Tuomas Rajala ~ Statistician</title>
<meta name="keywords" content="geometry, R">
<meta name="description" content="Numbers of directions, compared.">
<meta name="author" content="Tuomas Rajala">
<link rel="canonical" href="https://antiphon.github.io/blog/2023-02-06-anisotropic-news/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.1a604fedec25e03e9fbf0fa84dfc2a185356369a0f7842f05d48cbb4e27cb258.css" integrity="sha256-GmBP7ewl4D6fvw&#43;oTfwqGFNWNpoPeELwXUjLtOJ8slg=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://antiphon.github.io/favicon.ico">
<link rel="apple-touch-icon" href="https://antiphon.github.io/apple-touch-icon.png">

  <meta name="twitter:image" content="https://antiphon.github.io/blog/2023-02-06-anisotropic-news/img/featured-small.png" />
  <meta name="twitter:card" property="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Anisotropic news | Tuomas Rajala ~ Statistician" />
<meta name="twitter:description" content="Numbers of directions, compared." />
<meta name="twitter:site" content="@novoreorx" />
<meta name="twitter:creator" content="@novoreorx" />
<meta property="og:title" content="Anisotropic news | Tuomas Rajala ~ Statistician" />
<meta property="og:description" content="Numbers of directions, compared." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://antiphon.github.io/blog/2023-02-06-anisotropic-news/" />
    <meta property="og:image" content="https://antiphon.github.io/blog/2023-02-06-anisotropic-news/img/featured-small.png" /><meta property="article:section" content="blog" />
  <meta property="article:published_time" content="2023-02-06T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2023-02-06T00:00:00&#43;00:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Blogs",
      "item": "https://antiphon.github.io/blog/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Anisotropic news",
      "item": "https://antiphon.github.io/blog/2023-02-06-anisotropic-news/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Anisotropic news | Tuomas Rajala ~ Statistician",
  "name": "Anisotropic news",
  "description": "Numbers of directions, compared.",
  "keywords": [
    "geometry", "R"
  ],
  "wordCount" : "693",
  "inLanguage": "en",
  "image":"https://antiphon.github.io/blog/2023-02-06-anisotropic-news/img/featured-small.png","datePublished": "2023-02-06T00:00:00Z",
  "dateModified": "2023-02-06T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Tuomas Rajala"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://antiphon.github.io/blog/2023-02-06-anisotropic-news/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Tuomas Rajala ~ Statistician",
    "logo": {
      "@type": "ImageObject",
      "url": "https://antiphon.github.io/favicon.ico"
    }
  }
}
</script><style>
  #icons {
    display: flex;
    flex-wrap: wrap;
    margin-top: 2em;
  }
  #icons .item {
    width: 80px;
    height: 50px;
    margin: 10px;
  }
  #icons .item .name {
    font-size: 12px;
    user-select: all;
    text-align: center;
  }
  #icons .item .icon {
    display: flex;
    justify-content: center;
  }
  #icons .item svg {
    width: 30px;
    height: 30px;
  }
</style>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js" integrity="sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>


<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary-bg: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

</head>

<body class="" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'auto';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://antiphon.github.io" accesskey="h" title="Tuomas Rajala ~ Statistician (Alt + H)">Tuomas Rajala ~ Statistician</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://antiphon.github.io/blog/" title="Posts"
                >Posts
                </a>
            </li>
            <li>
                <a href="https://antiphon.github.io/docs/" title="Docs"
                >Docs
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://antiphon.github.io">Home</a>&nbsp;»&nbsp;<a href="https://antiphon.github.io/blog/">Blogs</a></div>
    <h1 class="post-title">
      Anisotropic news
    </h1>
    <div class="post-description">
      Numbers of directions, compared.
    </div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>2023-02-06</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="https://antiphon.github.io/tags/geometry/">geometry</a><a href="https://antiphon.github.io/tags/r/">R</a></span></span>

      
      
    </div>
  </header> <div class="toc side right">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#new-paper-out" aria-label="New paper out">New paper out</a><ul>
                        
                <li>
                    <a href="#results-in-briefs" aria-label="Results in brief(s)">Results in brief(s)</a></li></ul>
                </li>
                <li>
                    <a href="#references" aria-label="References">References</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="new-paper-out">New paper out</h1>
<p>Back in 2018 Aila, Claudia, Martina and I wrote a review piece listing the kind of statistics people use to describe directional structures in spatial point patterns (Rajala et al. 2018). Our plan was to gather what we could find into one toolbox, and then compare the tools with respect to statistical power, ease of use, and other such user-relevant metrics.</p>
<p>As we compiled and parsed the sparse literature, it became clear to us that due to the ambiguity of the null-hypothesis, a general test procedure for testing isotropy is probably always going to be a poorly defined construct. A point process can be isotropic only one way, but <em>anisotropic</em> in infinitely many ways. The process and the anisotropy mechanism might not be possible to separate, in general. A more specific problem is getting to the null-distribution of a chosen test statistics. Sampling from $H_0$ <em>under assumed isotropic generating model</em> would be an option, but then we must ask how such a thing could be estimated under $H_1$? A geometric anisotropy mechanism would distort range parameter estimates, for example. An alternative is to side-step the model and <em>emulate interesting parts of the process as if it where isotropic</em> (Wong and Chiu 2016). But here again the distortion would muddle the waters. Perhaps it is best to go back to the field and collect more replicates (Redenbach et al. 2009).</p>
<p>Since we are academics and don’t like going to the fields, it is perfectly sensible for us to still compare the plethora of proposed <em>statistics</em>, i.e. the numbers we compute from the patterns, using simulations. We simply set the truth, say model $\mathbf{x}_0\sim M_0$m, from which we observe data patterns ${\mathbf{x}\ }$ that have been pushed trough some anisotropy-inducing transformations $T:{\mathbf{x}_0}\mapsto{\mathbf{x}}$. Since we know $M_0$, we have access to every null-model related quantity we need. Particularly, for any summary statistics that claims to measure anisotropy, we can compute its statistical power. Repeat for many statistics, apply to many, many models and transformations, and four years later we arrive to what we used to call the “Battle Paper” (Rajala et al. 2022).</p>
<h2 id="results-in-briefs">Results in brief(s)</h2>
<p>To roughly cover enough interesting types of patterns, in addition to the usual suspects of geometrically anisotropic Strauss and Thomas processes (heavily modified to have better control of point counts etc) we also included patterns with clear linear features, and a somewhat debatably relevant (non-stationary) patterns with single dense ridge running through the region. We included varying levels of point counts and strenghts of anisotropy, and computed most of the statistics described in the review paper. The end result was a very long list of powers that needed to be sifted for information.</p>
<p>The figure below gives the TL;DR, which is pretty much what one would expect when it comes to statistical power and point patterns: Pairwise stuff is more powerful than nearest neighbour stuff; Simple stuff is more powerful than complicated stuff. Various K-functions are pretty solid option almost always, and what flavour one chooses is more or less up to you, as long as you get the tuning parameters (opening angles, mostly) right. More details in the paper.</p>
<div class="figure">
<img src="img/anipowers1.png" alt="Overall results of the simulation trials. For each anisotropy summary, the gray points, with shape by model, give the best power over tuning parameters, integration limits, and tests. The large dot is the mean over all powers. (Figure 10 in the paper)" width="698" />
<p class="caption">
Figure 1: Overall results of the simulation trials. For each anisotropy summary, the gray points, with shape by model, give the best power over tuning parameters, integration limits, and tests. The large dot is the mean over all powers. (Figure 10 in the paper)
</p>
</div>
<p>All the calculated statistics, and more what we discussed in the review paper but not in the battle paper, have been implemented (at varying degrees) in the R-package <a href="https://antiphon.github.io/Kdirectional"><strong><code>Kdirectional</code></strong></a>.</p>
<h1 id="references">References</h1>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-rajala2018" class="csl-entry">
<p>Rajala, T., C. Redenbach, A. Särkkä, and M. Sormani. 2018. “A Review on Anisotropy Analysis of Spatial Point Patterns.” <em>Spatial Statistics</em> 28 (December): 141–68. <a href="https://doi.org/10.1016/j.spasta.2018.04.005">https://doi.org/10.1016/j.spasta.2018.04.005</a>.</p>
</div>
<div id="ref-rajala_tests_2022" class="csl-entry">
<p>———. 2022. “Tests for Isotropy in Spatial Point Patterns A Comparison of Statistical Indices.” <em>Spatial Statistics</em> 52 (December): 100716. <a href="https://doi.org/10.1016/j.spasta.2022.100716">https://doi.org/10.1016/j.spasta.2022.100716</a>.</p>
</div>
<div id="ref-redenbach_anisotropy_2009" class="csl-entry">
<p>Redenbach, Claudia, Aila Särkkä, Johannes Freitag, and Katja Schladitz. 2009. “Anisotropy Analysis of Pressed Point Processes.” <em>AStA Advances in Statistical Analysis</em> 93 (3): 237–61. <a href="https://doi.org/10.1007/s10182-009-0106-5">https://doi.org/10.1007/s10182-009-0106-5</a>.</p>
</div>
<div id="ref-wong_isotropy_2016" class="csl-entry">
<p>Wong, Ka Yiu, and Sung Nok Chiu. 2016. “Isotropy Test for Spatial Point Processes Using Stochastic Reconstruction.” <em>Spatial Statistics</em> 15 (February): 56–69. <a href="https://doi.org/10.1016/j.spasta.2015.12.002">https://doi.org/10.1016/j.spasta.2015.12.002</a>.</p>
</div>
</div>

  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="next" href="https://antiphon.github.io/blog/2022-07-15-r-leaflet-and-mml-tiles-changing-the-output-crs/">
    <span class="title">Next Page&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg>
    </span>
    <br>
    <span>R, leaflet, and MML tiles: Changing the output CRS</span>
  </a>
</nav>

  </footer><div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "tuomas-rajala-blog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>
    </main>
    
<footer class="footer">
  <span>&copy; 2023 <a href="https://antiphon.github.io">Tuomas Rajala ~ Statistician</a></span><span style="display: inline-block; margin-left: 1em;">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a>
  </span>
  <span style="display: inline-block; margin-left: 1em;">
    Powered by
    <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
    <a href="https://github.com/reorx/hugo-PaperModX/" rel="noopener" target="_blank">PaperModX</a>
  </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '1' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>
<script>
  document.querySelectorAll('pre > code').forEach((codeblock) => {
    const container = codeblock.parentNode.parentNode;

    const copybutton = document.createElement('button');
    copybutton.classList.add('copy-code');
    copybutton.innerText = 'copy';

    function copyingDone() {
      copybutton.innerText = 'copied!';
      setTimeout(() => {
        copybutton.innerText = 'copy';
      }, 2000);
    }

    copybutton.addEventListener('click', (cb) => {
      if ('clipboard' in navigator) {
        navigator.clipboard.writeText(codeblock.textContent);
        copyingDone();
        return;
      }

      const range = document.createRange();
      range.selectNodeContents(codeblock);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand('copy');
        copyingDone();
      } catch (e) { };
      selection.removeRange(range);
    });

    if (container.classList.contains("highlight")) {
      container.appendChild(copybutton);
    } else if (container.parentNode.firstChild == container) {
      
    } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
      
      codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
    } else {
      
      codeblock.parentNode.appendChild(copybutton);
    }
  });
</script>




<script>
  
  
  (function() {
    const enableTocScroll = '1' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>
<script>
  mediumZoom('.entry-cover img');
  mediumZoom('.post-content img:not([no-zoom])');
</script>

<script src="/js/instantclick.min.js" data-no-instant
></script>
<script data-no-instant>
  
  
  
  
  
  
  InstantClick.init();
</script>
</body>

</html>
